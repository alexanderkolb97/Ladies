{"ast":null,"code":"import _slicedToArray from\"C:/Users/\\u0421\\u0430\\u0448\\u0430/Desktop/ladies_react/ladies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from'react';import{Context}from'./App';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Products(){var _useContext=useContext(Context),dataStatus=_useContext.dataStatus,sortStatus=_useContext.sortStatus,searchStatus=_useContext.searchStatus,setCartNumber=_useContext.setCartNumber,itemsIds=_useContext.itemsIds,setItemsIds=_useContext.setItemsIds;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),productsHtml=_useState2[0],setProductsHtml=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),itemId=_useState4[0],setItemId=_useState4[1];var data=[];var sort=function sort(direction){data=JSON.parse(localStorage.getItem('data'));data.sort(function(a,b){return+a.price-+b.price;});if(direction=='desc')data.reverse();show();};var search=function search(query){data=JSON.parse(localStorage.getItem('data'));data=data.filter(function(item){if(item.title.indexOf(query)!=-1)return item;});show();};var addToCart=function addToCart(e){setItemId(e.target.closest('li').id);itemsIds.push(e.target.closest('li').id);};var show=function show(){if(data.length==0)data=JSON.parse(localStorage.getItem('data'));var list=data.map(function(item,index){return/*#__PURE__*/_jsxs(\"li\",{id:index+1,className:\"list_item\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.image}),/*#__PURE__*/_jsxs(\"div\",{className:\"list_item_info\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"info_title\",children:item.title}),/*#__PURE__*/_jsx(\"p\",{className:\"info_category\",children:item.category}),/*#__PURE__*/_jsxs(\"p\",{className:\"info_price\",children:[\"$\",item.price]}),/*#__PURE__*/_jsx(\"button\",{onClick:addToCart,className:\"info_add_btn\",children:\"+\"})]})]},index);});setProductsHtml(list);};useEffect(function(_){if(dataStatus){show();}if(sortStatus!='')sort(sortStatus);if(searchStatus!=''){search(searchStatus);}else if(dataStatus){show();}setCartNumber(itemsIds.length);},[dataStatus,sortStatus,searchStatus,itemId]);var saveItemsToCookie=function saveItemsToCookie(){document.cookie=\"data=\".concat(itemsIds);};saveItemsToCookie();return/*#__PURE__*/_jsx(\"ul\",{className:\"list\",children:productsHtml});}export default Products;","map":{"version":3,"sources":["C:/Users/Саша/Desktop/ladies_react/ladies/src/Products.js"],"names":["React","useContext","useEffect","useState","Context","Products","dataStatus","sortStatus","searchStatus","setCartNumber","itemsIds","setItemsIds","productsHtml","setProductsHtml","itemId","setItemId","data","sort","direction","JSON","parse","localStorage","getItem","a","b","price","reverse","show","search","query","filter","item","title","indexOf","addToCart","e","target","closest","id","push","length","list","map","index","image","category","_","saveItemsToCookie","document","cookie"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport {Context} from './App';\r\n\r\nfunction Products() {\r\n    const {dataStatus, sortStatus, searchStatus, setCartNumber, itemsIds, setItemsIds} = useContext(Context);\r\n    const [productsHtml, setProductsHtml] = useState('');\r\n\r\n    const [itemId, setItemId] = useState();\r\n    \r\n\r\n    let data = [];\r\n\r\n    const sort = function(direction) {\r\n        data = JSON.parse(localStorage.getItem('data'));\r\n        data.sort((a, b) => +a.price - +b.price);\r\n        \r\n        if(direction == 'desc') data.reverse();\r\n\r\n        show()\r\n\r\n    }\r\n    \r\n    const search = function(query) {\r\n        data = JSON.parse(localStorage.getItem('data'));\r\n        data = data.filter(item => {\r\n            if(item.title.indexOf(query) != -1) return item\r\n        })\r\n\r\n        show()\r\n    }\r\n\r\n    const addToCart = function(e) {\r\n        setItemId(e.target.closest('li').id)\r\n        itemsIds.push(e.target.closest('li').id)\r\n    }\r\n\r\n    const show = function() {\r\n        if(data.length == 0) data = JSON.parse(localStorage.getItem('data'));\r\n        let list = data.map((item, index) => {\r\n            return (\r\n                <li id={index + 1} key={index} className=\"list_item\">\r\n                    <img src={item.image}></img>\r\n                    <div className=\"list_item_info\">\r\n                        <p className=\"info_title\">{item.title}</p>\r\n                        <p className=\"info_category\">{item.category}</p>\r\n                        <p className=\"info_price\">${item.price}</p>\r\n                        <button onClick={addToCart} className=\"info_add_btn\">+</button>\r\n                    </div>\r\n                </li>\r\n            )\r\n        })\r\n\r\n        setProductsHtml(list)\r\n\r\n    }\r\n\r\n    useEffect(_ => {\r\n        if(dataStatus) {\r\n            show()\r\n        }\r\n\r\n        if(sortStatus != '') sort(sortStatus);\r\n\r\n        if(searchStatus != '') {\r\n            search(searchStatus)\r\n        } else if(dataStatus) {\r\n            show()\r\n        }\r\n        \r\n        setCartNumber(itemsIds.length);\r\n\r\n    }, [dataStatus, sortStatus, searchStatus, itemId]);\r\n\r\n    const saveItemsToCookie = function() {\r\n        document.cookie = `data=${itemsIds}`\r\n    }\r\n\r\n    saveItemsToCookie()\r\n\r\n    return (\r\n        <ul className=\"list\">\r\n            {productsHtml}\r\n        </ul>\r\n    )\r\n}\r\n\r\nexport default Products;"]},"metadata":{},"sourceType":"module"}