{"ast":null,"code":"import _slicedToArray from\"C:/Users/\\u0421\\u0430\\u0448\\u0430/Desktop/Ladies/Ladies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import{Context}from'./App';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Cart(){var _useContext=useContext(Context),setCartNumber=_useContext.setCartNumber,itemsIds=_useContext.itemsIds,setItemsIds=_useContext.setItemsIds,cartNumber=_useContext.cartNumber;var items=JSON.parse(localStorage.getItem('data'));var count=function count(id){var count=0;itemsIds.forEach(function(item){if(+item==+id)count++;});return count;};var itemUp=function itemUp(e){var id=e.target.closest('li').id;var items=itemsIds;items.push(id);document.cookie=\"data=\".concat(items.join());setItemsIds(items);setCartNumber(items.length);setList(listHtml());};var itemDown=function itemDown(e){removeItem(e);};var removeItem=function removeItem(e){var items=itemsIds;console.log(items);var id=e.target.closest('li').id;var index=items.indexOf(id);if(index!=-1)items.splice(index,1);setItemsIds(items);setCartNumber(items.length);setList(listHtml());};var listHtml=function listHtml(){var cartItems=[];cartItems=items.filter(function(item){return itemsIds.indexOf(String(item.id))!=-1?item:false;});var html=cartItems.map(function(item,index){var quantity=count(item.id)||0;return/*#__PURE__*/_jsxs(\"li\",{id:item.id,className:\"item\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,className:\"cart_img\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"list_item_info\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"info_title\",children:item.title}),/*#__PURE__*/_jsx(\"p\",{className:\"info_category\",children:item.category}),/*#__PURE__*/_jsxs(\"p\",{className:\"info_price\",children:[\"$\",item.price*quantity]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quantity\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"quantity_field\",children:quantity}),/*#__PURE__*/_jsx(\"button\",{onClick:itemUp,className:\"plus\",children:\"+\"}),/*#__PURE__*/_jsx(\"button\",{onClick:itemDown,className:\"minus\",children:\"-\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:removeItem,className:\"item_remove\",children:\"Remove from cart\"})]},index);});return html;};var _useState=useState(false),_useState2=_slicedToArray(_useState,2),cartState=_useState2[0],setCartState=_useState2[1];var _useState3=useState(function(){return listHtml();}),_useState4=_slicedToArray(_useState3,2),list=_useState4[0],setList=_useState4[1];useEffect(function(){if(list.length>0){setCartState(true);}else{setCartState(false);}console.log(itemsIds);if(itemsIds&&itemsIds.length>0){document.cookie=\"data=\".concat(itemsIds.join());}else{document.cookie='data=';}},[list,itemsIds]);return/*#__PURE__*/_jsxs(\"div\",{className:\"cart\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"cart_header\",children:[\"Cart \",cartState?'products are displayed below':'is empty']}),/*#__PURE__*/_jsx(\"ul\",{className:\"items_list\",children:list})]});}export default Cart;","map":{"version":3,"sources":["C:/Users/Саша/Desktop/Ladies/Ladies/src/Cart.js"],"names":["React","useState","useEffect","useContext","Context","Cart","setCartNumber","itemsIds","setItemsIds","cartNumber","items","JSON","parse","localStorage","getItem","count","id","forEach","item","itemUp","e","target","closest","push","document","cookie","join","length","setList","listHtml","itemDown","removeItem","console","log","index","indexOf","splice","cartItems","filter","String","html","map","quantity","image","title","category","price","cartState","setCartState","list"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useContext} from 'react';\r\nimport {Context} from './App';\r\n\r\nfunction Cart() {\r\n    const {setCartNumber, itemsIds, setItemsIds, cartNumber} = useContext(Context);\r\n\r\n    let items = JSON.parse(localStorage.getItem('data'));\r\n\r\n    const count = (id) => {\r\n        let count = 0;\r\n\r\n        itemsIds.forEach(item => {\r\n            if(+item == +id) count++\r\n        })\r\n\r\n        return count\r\n    }\r\n\r\n    const itemUp = (e) => {   \r\n       let id = e.target.closest('li').id;\r\n       let items = itemsIds;\r\n       items.push(id);\r\n\r\n       document.cookie = `data=${items.join()}`;\r\n       setItemsIds(items);\r\n       setCartNumber(items.length)\r\n       setList(listHtml())\r\n    }\r\n\r\n    const itemDown = (e) => {\r\n        removeItem(e);\r\n    }\r\n\r\n    const removeItem = function(e) {\r\n        let items = itemsIds;\r\n        console.log(items)\r\n        let id = e.target.closest('li').id;\r\n        let index = items.indexOf(id);\r\n        if(index != -1) items.splice(index, 1);\r\n        setItemsIds(items);\r\n        setCartNumber(items.length)\r\n        setList(listHtml())\r\n    }\r\n\r\n    const listHtml = function() {\r\n        let cartItems = [];\r\n\r\n        cartItems = items.filter((item) => {\r\n            return itemsIds.indexOf(String(item.id)) != -1 ? item : false\r\n        })\r\n\r\n        let html = cartItems.map((item, index) => {\r\n            let quantity = count(item.id) || 0;\r\n\r\n            return (\r\n                <li id={item.id} key={index} className=\"item\">\r\n                    <img src={item.image} className=\"cart_img\"></img>\r\n                        <div className=\"list_item_info\">\r\n                            <p className=\"info_title\">{item.title}</p>\r\n                            <p className=\"info_category\">{item.category}</p>\r\n                            <p className=\"info_price\">${item.price * quantity}</p>\r\n                        </div>\r\n                        <div className=\"quantity\">\r\n                            <div className=\"quantity_field\">{quantity}</div>\r\n                            <button onClick={itemUp} className=\"plus\">+</button>\r\n                            <button onClick={itemDown} className=\"minus\">-</button>\r\n                        </div>\r\n                        <button onClick={removeItem} className=\"item_remove\">Remove from cart</button>\r\n                </li>\r\n            )\r\n        })\r\n\r\n        return html\r\n    }\r\n\r\n    const [cartState, setCartState] = useState(false);\r\n    const [list, setList] = useState(() => listHtml());\r\n\r\n    useEffect(() => {\r\n        if(list.length > 0) {\r\n            setCartState(true)\r\n        } else {\r\n            setCartState(false)\r\n        }\r\n\r\n        console.log(itemsIds)\r\n\r\n        if(itemsIds && itemsIds.length > 0) {\r\n            document.cookie = `data=${itemsIds.join()}`;\r\n        } else {\r\n            document.cookie = 'data=';\r\n        }\r\n\r\n\r\n    }, [list, itemsIds])\r\n    \r\n    return (\r\n        <div className=\"cart\">\r\n            <h1 className=\"cart_header\">Cart {cartState ? 'products are displayed below' : 'is empty'}</h1>\r\n            <ul className=\"items_list\">\r\n                {list}\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Cart;\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}